(this["webpackJsonpknn-for-ml"]=this["webpackJsonpknn-for-ml"]||[]).push([[0],{46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},56:function(e,t){},70:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a(1),c=a.n(n),r=a(27),i=a.n(r),l=(a(46),a(47),a(39)),o=a(3),h=a(6),d=a(7),p=a(9),u=a(8),b=a(36),j=a.n(b),m=(a(48),a.p+"static/media/cetyslogo.e1730752.png"),x=a.p+"static/media/req1.4de9e402.PNG",f=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(h.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={csvFile:void 0,columnDefs:[]},e.handleChange=function(t){e.setState({csvfile:t.target.files[0]})},e.importCSV=function(){var t=e.state.csvfile;void 0!==t?j.a.parse(t,{complete:function(t){e.saveData(t)},header:!0,dynamicTyping:!0}):alert("Favor de seleccionar un dataset")},e.saveData=function(t){var a=e.state.columnDefs;t.data.pop();for(var s=0;s<t.meta.fields.length;s++)a.push({headerName:t.meta.fields[s].toString(),field:t.meta.fields[s]});e.setState({columnDefs:a},(function(){e.props.history.push({pathname:"/main",data:{columnas:a,datos:t.data}})}))},e}return Object(d.a)(a,[{key:"render",value:function(){return Object(s.jsx)(n.Fragment,{children:Object(s.jsx)("div",{className:"backgroundMain",children:Object(s.jsxs)("div",{className:"contenedor pt-4",children:[Object(s.jsx)("h1",{children:"Herramienta interactiva para clasificaci\xf3n por KNN"}),Object(s.jsx)("img",{id:"logoCetys",src:m}),Object(s.jsx)("h3",{className:"p-3",children:"Importa tu archivo CSV!"}),Object(s.jsx)("input",{className:"csv-input",type:"file",name:"file",placeholder:null,onChange:this.handleChange}),Object(s.jsx)("p",{}),Object(s.jsx)("button",{onClick:this.importCSV,children:" Enviar Datos"}),Object(s.jsx)("h4",{className:"p-3",children:"Requisitos para un correcto funcionamiento:"}),Object(s.jsx)("li",{children:"La primera fila del archivo CSV, debe contener el nombre de los predictores. Ejemplo:"}),Object(s.jsx)("img",{id:"req1",src:x})]})})})}}]),a}(c.a.Component),v=a(15),O=a(76),y=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(h.a)(this,a),(s=t.call(this,e)).new_x=new Object,s.state={pred:"undefined"},s}return Object(d.a)(a,[{key:"onClickPredict",value:function(){var e,t=new Array,a=Object(v.a)(this.props.predictors);try{for(a.s();!(e=a.n()).done;){var s=e.value;t.push(this.new_x[s])}}catch(c){a.e(c)}finally{a.f()}var n=this.predict(t);this.setState({pred:this.props.labels[n]})}},{key:"norm",value:function(e,t){return O.f(e,t).map((function(e){return Math.pow(e,2)}))}},{key:"predict",value:function(e){var t=this;try{var a=new Array,s=new Array,n=new Array,c=new Array,r=O.g(this.props.y.length)._data,i=O.c(this.props.x),l=i.size();if(1===l.length)console.log(this.props.x),a=this.norm(this.props.x,e[0]);else if(2===l.length)for(var o=0;o<l[1];o++)a.push(this.norm(O.b(O.a(i,o)),e));c=a.copyWithin();for(var h=0;h<this.props.knn;h++)s.push(c.indexOf(O.e(a))+h),c.splice(s[h],1);n=s.map((function(e){return t.props.y[e]}));var d,p=Object(v.a)(n);try{for(p.s();!(d=p.n()).done;){r[d.value]+=1}}catch(u){p.e(u)}finally{p.f()}return r.indexOf(O.d(r))}catch(b){alert("No sirve dataset")}}},{key:"renderForm",value:function(){var e,t=new Array,a=Object(v.a)(this.props.predictors);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push(Object(s.jsxs)(c.a.Fragment,{children:[n," ",Object(s.jsx)("input",{type:"number",name:n,onChange:this.onChangeNewX.bind(this)}),Object(s.jsx)("br",{})]}))}}catch(r){a.e(r)}finally{a.f()}return console.log(this.props.labels),console.log(this.new_x),t}},{key:"onChangeNewX",value:function(e){var t=e.target.name,a=e.target.value;this.new_x[t]=a}},{key:"render",value:function(){return Object(s.jsx)(c.a.Fragment,{children:Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("div",{className:"row",children:Object(s.jsx)("div",{className:"col-12 d-flex justify-content-center",children:"Predictors:"})}),Object(s.jsx)("div",{className:"row",children:Object(s.jsx)("div",{className:"col-12",children:this.renderForm()})}),Object(s.jsx)("div",{className:"row",children:Object(s.jsx)("div",{className:"col-12",children:Object(s.jsx)("button",{type:"button",className:"btn btn-primary w-50 mt-3",onClick:this.onClickPredict.bind(this),children:"Predict"})})}),Object(s.jsx)("div",{className:"row",children:Object(s.jsxs)("div",{className:"col-12",children:["Clase Perteneciente: ",this.state.pred]})})]})})}}]),a}(c.a.Component),g=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(h.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={labelsHtml:[],checkBoxes:[]},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){if(this.props.columns.length>0){var e=this.state,t=e.labelsHtml,a=e.checkBoxes;t.push(Object(s.jsx)("option",{value:"Default",children:"Escoge una opcion"},"Default"));for(var n=0;n<this.props.columns.length;n++)t.push(Object(s.jsx)("option",{value:this.props.columns[n].field,children:this.props.columns[n].field})),a.push(Object(s.jsxs)("div",{className:"form-check form-check-inline",children:[this.props.columns[n].field,Object(s.jsx)("input",{className:"ml-1",name:this.props.columns[n].field,type:"checkbox",onChange:this.onChangePredictors.bind(this)})]}));this.setState({labelsHtml:t,checkBoxes:a})}else this.setState({labelsHtml:Object(s.jsx)("option",{value:"Nada",children:"Nullptr"}),checkBoxes:Object(s.jsx)("input",{type:"checkbox"})})}},{key:"onChangeLabel",value:function(e){this.props.selecterCallback(this.props.predictors,e.target.value)}},{key:"onChangePredictors",value:function(e){var t=this.props.predictors;if(t.includes(e.target.name)){var a=t.indexOf(e.target.name);t.pop(a)}else t.push(e.target.name);this.props.selecterCallback(t,this.props.label)}},{key:"render",value:function(){var e=this.state,t=e.labelsHtml,a=e.checkBoxes;return Object(s.jsxs)(c.a.Fragment,{children:[Object(s.jsx)("div",{className:"row justify-content-center text-center",children:Object(s.jsxs)("div",{className:"col",children:[Object(s.jsx)("label",{htmlFor:"elSelect",children:Object(s.jsx)("h6",{children:"Selecciona tu respuesta (clasificaciones):"})}),Object(s.jsx)("br",{}),Object(s.jsx)("select",{name:"elSelect",onChange:this.onChangeLabel.bind(this),children:t})]})}),Object(s.jsx)("div",{className:"row justify-content-center text-center",children:Object(s.jsxs)("div",{className:"col",children:[Object(s.jsx)("label",{htmlFor:"losCheckboxes",children:Object(s.jsx)("h6",{children:"Marca los predictores a usar (X):"})}),Object(s.jsx)("label",{htmlFor:"losCheckboxes",children:Object(s.jsx)("h6",{children:"*Nota: Se debe seleccionar en orden descendiente \u2193 y deseleccionar en orden ascendente \u2191*"})}),Object(s.jsx)("div",{name:"losCheckboxes",className:"pt-2",children:a})]})})]})}}]),a}(c.a.Component),k=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(h.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={labelsHtml:[],checkBoxes:[]},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){if(this.props.columns.length>0){var e=this.state,t=e.labelsHtml,a=e.checkBoxes;t.push(Object(s.jsx)("option",{value:"Default",children:"Escoge una opcion"},"Default"));for(var n=0;n<this.props.columns.length;n++)t.push(Object(s.jsx)("option",{value:this.props.columns[n].field,children:this.props.columns[n].field},this.props.columns[n].field)),a.push(Object(s.jsxs)("div",{className:"d-flex justify-content-around",children:[this.props.columns[n].field,Object(s.jsx)("input",{name:this.props.columns[n].field,type:"checkbox",onChange:this.onChangePredictors})]}));this.setState({labelsHtml:t,checkBoxes:a})}else this.setState({labelsHtml:Object(s.jsx)("option",{value:"Nada",children:"Nullptr"}),checkBoxes:Object(s.jsx)("input",{type:"checkbox"})})}},{key:"sendDataToParent",value:function(e){this.props.returnData(e.target.value)}},{key:"render",value:function(){var e=this.state.labelsHtml;return Object(s.jsx)(c.a.Fragment,{children:Object(s.jsx)("select",{onChange:this.sendDataToParent.bind(this),children:e})})}}]),a}(n.Component),C=a(37),N=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(h.a)(this,a),(s=t.call(this,e)).state={classes:s.props.c,xlabel:s.props.xlabel,ylabel:s.props.ylabel},s}return Object(d.a)(a,[{key:"onlyUnique",value:function(e,t,a){return a.indexOf(e)===t}},{key:"getRandomColor",value:function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}},{key:"pairs_creator",value:function(){for(var e=this.props.x,t=this.props.y,a=this.props.c,s=a.filter(this.onlyUnique),n=new Array,c=new Array,r=0;r<e.length;r++)n.push({x:e[r],y:t[r],c:a[r]});for(r=0;r<s.length;r++)c[r]=n.filter((function(e){return e.c==s[r]}));var i=new Array;for(r=0;r<c.length;r++)i.push({type:"scatter",color:this.getRandomColor(),legendText:"Clase: "+s[r],showInLegend:"true",markerSize:5,toolTipContent:this.props.xlabel+": {x}  "+this.props.ylabel+": {y}",dataPoints:c[r]});return i.push({type:"scatter",color:this.getRandomColor(),legendText:"Punto de prueba",showInLegend:"true",markerSize:5,toolTipContent:this.props.xlabel+": {x}  "+this.props.ylabel+": {y}",dataPoints:[this.props.point]}),i}},{key:"render",value:function(){var e={theme:"light2",animationEnabled:!0,zoomEnabled:!0,title:{text:this.props.xlabel+" vs "+this.props.ylabel},axisX:{title:this.props.xlabel,crosshair:{enabled:!0,snapToDataPoint:!0}},axisY:{title:this.props.ylabel,crosshair:{enabled:!0,snapToDataPoint:!0}},legend:{verticalAlign:"bottom",horizontalAlign:"left"},data:this.pairs_creator()};return Object(s.jsx)(c.a.Fragment,{children:Object(s.jsx)(C.a,{options:e})})}}]),a}(c.a.Component),w=a(38),D=(a(68),a(69),a(70),function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(h.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={columns:[],data:[],predictors:[],label:"",xlabel:"",ylabel:"",x:[],y:[],c:[],xnew:1,ynew:1,k:3},e.regresarAload=function(){e.props.history.replace({pathname:"/loaddata"})},e.getColumnsData=function(t){var a,s=new Object,n=0,c=Object(v.a)(t);try{for(c.s();!(a=c.n()).done;){var r=a.value;s[r]=new Array;var i,l=Object(v.a)(e.state.data);try{for(l.s();!(i=l.n()).done;){var o=i.value;n=null==o[r]||void 0==o[r]?0:o[r],s[r].push(n)}}catch(h){l.e(h)}finally{l.f()}}}catch(h){c.e(h)}finally{c.f()}return s},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){null==this.props.location.data?(alert("No se pudo obtener ningun dato, reedireccionando...."),this.props.history.push({pathname:"/loaddata"})):this.setState({columns:this.props.location.data.columnas,data:this.props.location.data.datos})}},{key:"selecterCallback",value:function(e,t){this.setState({predictors:e,label:t},(function(){}))}},{key:"graphSelectorCallbackX1",value:function(e){var t=this;this.setState({ylabel:e},(function(){t.setState({y:t.getColumnsData([t.state.ylabel])})}))}},{key:"graphSelectorCallbackX2",value:function(e){var t=this;this.setState({xlabel:e},(function(){t.setState({x:t.getColumnsData([t.state.xlabel])})}))}},{key:"onlyUnique",value:function(e,t,a){return a.indexOf(e)===t}},{key:"encoder",value:function(e){for(var t=e,a=t.filter(this.onlyUnique),s=new Array,n=0;n<t.length;n++)s[n]=a.indexOf(t[n]);return s}},{key:"render",value:function(){var e=this,t=this.getColumnsData([this.state.xlabel])[this.state.xlabel],a=this.getColumnsData([this.state.ylabel])[this.state.ylabel],n=this.getColumnsData([this.state.label])[this.state.label],r=this.encoder(n),i=n.filter(this.onlyUnique),l={x:parseFloat(this.state.xnew),y:parseFloat(this.state.ynew)};return Object(s.jsx)(c.a.Fragment,{children:Object(s.jsx)("div",{className:"mainContenedor",children:Object(s.jsxs)("div",{className:"container",id:"genContenedor",children:[Object(s.jsx)("div",{className:"row",children:Object(s.jsxs)("div",{className:"jumbotron",style:{background:"transparent"},children:[Object(s.jsx)("h1",{className:"display-4",children:"Herramienta interactiva para clasificaci\xf3n por KNN"}),Object(s.jsx)("p",{className:"lead",children:"Esta herramienta facilita el realizar KNN desde una aplicaci\xf3n facil y util. Las opciones intuitivas te guiaran a lo largo del proceso."}),Object(s.jsx)("hr",{className:"my-3"}),Object(s.jsx)("p",{children:"Desarrollado por: Gerardo Meneses, Pablo Diaz, Diego Garibay y Kevin Huerta"})]})}),Object(s.jsx)("div",{style:{height:"500px",width:"100%"},className:"ag-theme-alpine",children:Object(s.jsx)(w.AgGridReact,{columnDefs:this.state.columns,rowData:this.state.data,pagination:!0})}),Object(s.jsx)("br",{}),Object(s.jsx)("button",{className:"btn btn-primary btn-lg",onClick:this.regresarAload,children:"Usar otro dataset"}),Object(s.jsx)("hr",{className:"my-4",color:"yellow"}),Object(s.jsxs)("div",{className:"row",children:[Object(s.jsxs)("div",{className:"col-6",children:[Object(s.jsx)("div",{children:"Cantidad de vecinos:"}),Object(s.jsx)("input",{type:"numeric",value:this.state.k,onChange:function(t){e.setState({k:t.target.value})}}),Object(s.jsx)(y,{x:t,y:r,knn:this.state.k,predictors:this.state.predictors,labels:i})]}),Object(s.jsx)("div",{className:"col-6",children:Object(s.jsx)(g,{columns:this.props.location.data.columnas,predictors:this.state.predictors,label:this.state.label,selecterCallback:this.selecterCallback.bind(this)})})]}),Object(s.jsx)("hr",{className:"my-4",color:"yellow"}),Object(s.jsxs)("div",{className:"row align-items-center",children:[Object(s.jsxs)("div",{className:"col-4",children:[Object(s.jsx)("div",{children:"Elige tus predictores para gr\xe1ficar:"}),Object(s.jsx)("br",{}),Object(s.jsxs)("div",{children:[" Predictor en X: ",Object(s.jsx)(k,{columns:this.props.location.data.columnas,returnData:this.graphSelectorCallbackX2.bind(this)})]}),Object(s.jsx)("br",{}),Object(s.jsxs)("div",{children:[" Predictor en Y: ",Object(s.jsx)(k,{columns:this.props.location.data.columnas,returnData:this.graphSelectorCallbackX1.bind(this)})]}),Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),Object(s.jsx)("div",{children:"Gr\xe1fica tu punto:"}),Object(s.jsx)("br",{}),Object(s.jsxs)("div",{children:["X: ",Object(s.jsx)("input",{type:"numeric",value:this.state.xnew,onChange:function(t){e.setState({xnew:t.target.value})}})]}),Object(s.jsx)("br",{}),Object(s.jsxs)("div",{children:["Y: ",Object(s.jsx)("input",{type:"numeric",value:this.state.ynew,onChange:function(t){e.setState({ynew:t.target.value})}})]})]}),Object(s.jsxs)("div",{className:"col-8",children:[Object(s.jsx)(N,{xlabel:this.state.xlabel,ylabel:this.state.ylabel,x:t,y:a,c:n,point:l}),Object(s.jsx)("br",{}),Object(s.jsx)("br",{})]})]})]})})})}}]),a}(n.Component));var S=function(){return Object(s.jsx)("div",{className:"App",children:Object(s.jsxs)(l.a,{children:[Object(s.jsx)(o.b,{path:"/loaddata",component:f}),Object(s.jsx)(o.b,{path:"/main",component:D}),Object(s.jsx)(o.b,{path:"/",component:this}),Object(s.jsx)(o.a,{to:"/loaddata"})]})})},A=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,77)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),c(e),r(e)}))};i.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(S,{})}),document.getElementById("root")),A()}},[[73,1,2]]]);
//# sourceMappingURL=main.17ea2731.chunk.js.map